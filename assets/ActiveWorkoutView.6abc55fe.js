import{d as y,o as g,c as k,w as S,p as _,t as N,a as i,u as e,b as X,I as w,Q as A,r as f,n as x,af as $,C as O,D as E,l as d,F as C,h as b,i as B,m as q,aq as M,f as T,ag as D,B as W,N as H,x as Q,ar as P,g as L,O as U,j as K,R as j}from"./index.be381c74.js";import{Q as z}from"./QPage.16e15d7e.js";import{i as F}from"./validators.06a91c63.js";const Y={class:"text-h6 q-mb-sm"},G=_("div",{class:"q-mb-sm"},"Remember to complete this exercise. No data is recorded.",-1),J=y({__name:"ActiveReminderSection",props:{exerciseName:null},setup(n){return(a,o)=>(g(),k(e(A),{class:"q-py-sm"},{default:S(()=>[_("div",Y,N(n.exerciseName),1),G,i(e(X),{name:e(w).ACTIVE_NOTIFY,color:"primary",size:"xl"},null,8,["name"])]),_:1}))}}),Z=y({__name:"ActiveWeightRepsItems",props:{index:null,weight:null,reps:null,activeExerciseRecordId:null,weightHint:null,repsHint:null},setup(n){const a=n,o=f(null),m=f(null),v=f(a.weight),t=f(a.reps),s="Invalid";async function l(){if(a.activeExerciseRecordId){const I=await E.getFirstByField(d.ACTIVE_EXERCISES,C.ID,a.activeExerciseRecordId),c=(I==null?void 0:I.weight)||[],u=(I==null?void 0:I.reps)||[];c[a.index]=v.value||0,u[a.index]=t.value||0,await E.updateById(d.ACTIVE_EXERCISES,a.activeExerciseRecordId,{weight:[...c],reps:[...u]})}r()}function r(){var I,c;(I=o==null?void 0:o.value)==null||I.validate(),(c=m==null?void 0:m.value)==null||c.validate()}return(I,c)=>(g(),x(O,null,[i(e($),{modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=u=>v.value=u),modelModifiers:{number:!0},ref_key:"weightInputRef",ref:o,rules:[u=>e(F)(u)||s],dense:"",outlined:"",type:"number",color:"primary",class:"col",hint:n.weightHint,onBlur:c[1]||(c[1]=u=>l())},null,8,["modelValue","rules","hint"]),i(e($),{modelValue:t.value,"onUpdate:modelValue":c[2]||(c[2]=u=>t.value=u),modelModifiers:{number:!0},ref_key:"repsInputRef",ref:m,rules:[u=>e(F)(u)||s],dense:"",outlined:"",type:"number",color:"primary",class:"col",hint:n.repsHint,onBlur:c[3]||(c[3]=u=>l())},null,8,["modelValue","rules","hint"])],64))}}),ee=_("div",{class:"text-h6"},"Sets",-1),te=_("div",{class:"text-caption"},"#",-1),se=_("div",{class:"text-caption col"},"Weight",-1),ae=_("div",{class:"text-caption col"},"Reps",-1),ie={class:"text-bold q-mt-lg"},ne={align:"right"},re=y({__name:"ActiveSetInput",props:{activeExerciseRecordId:null,activeExerciseRecordparentId:null},setup(n){const a=n,{log:o}=b(),{confirmDialog:m}=B(),v=f([]),t=f([]),s=f([]),l=f([]),r=20;q(async()=>{var u,h;try{const R=await E.getFirstByField(d.ACTIVE_EXERCISES,C.ID,a.activeExerciseRecordId);if(v.value=(R==null?void 0:R.weight)||[],t.value=(R==null?void 0:R.reps)||[],a.activeExerciseRecordId){const p=await E.getNewestByField(d.EXERCISE_RECORDS,C.PARENT_ID,a.activeExerciseRecordparentId);s.value=((u=p==null?void 0:p.weight)==null?void 0:u.map(V=>String(V||"-")))||[],l.value=((h=p==null?void 0:p.reps)==null?void 0:h.map(V=>String(V||"-")))||[]}}catch(R){o.error("ActiveSetInput:onMounted",R)}});function I(){v.value.push(void 0),t.value.push(void 0)}function c(){m("Remove Set","Are you sure you want to remove the last set?",w.DELETE,H.ERROR,()=>{v.value.pop(),t.value.pop()})}return(u,h)=>(g(),x(O,null,[i(e(A),{class:"row items-start q-py-sm"},{default:S(()=>[ee,i(e(M)),i(e(T),{disable:t.value.length>=r,round:"",color:"positive",size:"sm",icon:e(w).ADD,onClick:h[0]||(h[0]=R=>I())},null,8,["disable","icon"])]),_:1}),i(e(D)),i(e(A),{class:"q-gutter-md row items-start q-py-none"},{default:S(()=>[te,i(e(D),{vertical:""}),se,i(e(D),{vertical:""}),ae]),_:1}),i(e(D)),i(e(A),null,{default:S(()=>[(g(!0),x(O,null,W(t.value,(R,p)=>(g(),x("div",{key:p,class:"q-gutter-md row items-start q-mb-sm"},[_("div",ie,N(p+1),1),i(Z,{index:p,weight:v.value[p],reps:t.value[p],activeExerciseRecordId:n.activeExerciseRecordId,weightHint:s.value[p]||"-",repsHint:l.value[p]||"-"},null,8,["index","weight","reps","activeExerciseRecordId","weightHint","repsHint"])]))),128)),_("div",ne,[i(e(T),{disable:!t.value.length,round:"",color:"negative",size:"sm",icon:e(w).REMOVE,onClick:h[1]||(h[1]=R=>c())},null,8,["disable","icon"])])]),_:1})],64))}}),oe={key:1},le={class:"text-h6 q-mb-sm"},ce=y({__name:"ActiveExerciseCard",props:{name:null,tracks:null,id:null,parentId:null},setup(n){const a=n,{log:o}=b(),m=Q();async function v(){try{const t=await E.getFirstByField(d.EXERCISES,C.ID,a==null?void 0:a.parentId);m.openDialog(d.EXERCISES,U.REPORT,t)}catch(t){o.error("ActiveExerciseCard:onReportDialog",t)}}return(t,s)=>(g(),k(e(L),{class:"q-mb-md"},{default:S(()=>[n.tracks===e(P).REMINDER_ONLY?(g(),k(J,{key:0,exerciseName:n.name},null,8,["exerciseName"])):(g(),x("div",oe,[i(e(A),{class:"q-py-sm"},{default:S(()=>[_("div",le,N(n.name),1),i(e(T),{round:"",flat:"",icon:e(w).REPORT,class:"absolute-top-right q-ma-sm",onClick:s[0]||(s[0]=l=>v())},null,8,["icon"])]),_:1}),i(re,{activeExerciseRecordId:n.id,activeExerciseRecordparentId:n.parentId},null,8,["activeExerciseRecordId","activeExerciseRecordparentId"])]))]),_:1}))}}),ue=y({__name:"ActiveExercisesList",setup(n){const{log:a}=b(),o=f([]),m=f([]);q(async()=>{try{const s=(await E.getAll(d.ACTIVE_WORKOUTS))[0];o.value=await Promise.all(s==null?void 0:s.exerciseRecordIds.map(async r=>await E.getFirstByField(d.ACTIVE_EXERCISES,C.ID,r)));const l=await Promise.all(o.value.map(async r=>await E.getFirstByField(d.EXERCISES,C.ID,r.parentId)));m.value=l}catch(s){a.error("ActiveExercisesList:onMounted",s)}});function v(s){var l;return(l=m.value.find(r=>r.id===s))==null?void 0:l.name}function t(s){var l;return(l=m.value.find(r=>r.id===s))==null?void 0:l.exerciseTracks}return(s,l)=>(g(!0),x(O,null,W(o.value,r=>(g(),x("div",{key:r.id,class:"col-sm-6 col-xs-12"},[i(ce,{name:v(r.parentId),tracks:t(r.parentId),id:r.id,parentId:r.parentId},null,8,["name","tracks","id","parentId"])]))),128))}}),de={class:"row justify-center"},me={class:"col-12"},ve={class:"row justify-center q-mt-lg"},pe=y({__name:"ActiveWorkoutPage",setup(n){const{log:a}=b(),{confirmDialog:o}=B(),m=K();async function v(){o("Finish Current Workout","You you ready to finish and save this workout?",w.SAVE,H.INFO,async()=>{try{const t=(await E.getAll(d.ACTIVE_WORKOUTS))[0],s=await E.getAll(d.ACTIVE_EXERCISES);t.finishedDate=new Date().toISOString(),await E.bulkAdd(d.EXERCISE_RECORDS,s),await E.add(d.WORKOUT_RECORDS,t),await E.clear(d.ACTIVE_EXERCISES),await E.clear(d.ACTIVE_WORKOUTS),m.push({name:j.DASHBOARD})}catch(t){a.error("ActiveWorkoutPage:finishWorkout",t)}})}return(t,s)=>(g(),k(e(z),{padding:""},{default:S(()=>[_("div",de,[_("div",me,[i(ue)])]),_("div",ve,[i(T,{label:"Finish Workout",color:"positive",onClick:s[0]||(s[0]=l=>v())})])]),_:1}))}}),_e=y({__name:"ActiveWorkoutView",setup(n){return(a,o)=>(g(),k(pe))}});export{_e as default};
