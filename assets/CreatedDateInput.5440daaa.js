import{aB as zt,bx as Rt,by as Ut,ax as Xt,m as M,bz as Ct,bA as Wt,i as dt,P as Yt,a1 as St,a3 as Ht,bB as pt,H as N,aT as Jt,ak as ie,aH as st,n as m,aI as pe,q as Ot,r as vt,bC as It,g as L,aF as Gt,bD as ea,aw as Fe,b0 as ta,d as aa,s as na,ad as la,ag as ua,o as oa,c as ra,w as Me,a as ae,u as z,I as ot,f as gt,$ as ia}from"./index.3bb17302.js";import{u as sa}from"./use-cache.b0833c75.js";import{p as Y}from"./format.3e32b8d9.js";import{T as ca}from"./TouchPan.cae2ad0a.js";import{u as da,a as va,Q as fa}from"./QMenu.a33633d0.js";import{e as ma}from"./validators.51e7c766.js";import"./touch.70a9dd44.js";import"./selection.7371cec7.js";function yt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const l=parseInt(e,10);return isNaN(l)?0:l}const We=zt({name:"close-popup",beforeMount(e,{value:l}){const i={depth:yt(l),handler(s){i.depth!==0&&setTimeout(()=>{const v=Rt(e);v!==void 0&&Ut(v,s,i.depth)})},handlerKey(s){Xt(s,13)===!0&&i.handler(s)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:l,oldValue:i}){l!==i&&(e.__qclosepopup.depth=yt(l))},beforeUnmount(e){const l=e.__qclosepopup;e.removeEventListener("click",l.handler),e.removeEventListener("keyup",l.handlerKey),delete e.__qclosepopup}}),ve=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function ha(e,l,i){return Object.prototype.toString.call(e)==="[object Date]"&&(i=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),Da(ft(e,l,i))}function Mt(e,l,i){return Tt(Ma(e,l,i))}function ga(e){return ya(e)===0}function Ge(e,l){return l<=6?31:l<=11||ga(e)?30:29}function ya(e){const l=ve.length;let i=ve[0],s,v,o,b,c;if(e<i||e>=ve[l-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<l&&(s=ve[c],v=s-i,!(e<s));c+=1)i=s;return b=e-i,v-b<6&&(b=b-v+T(v+4,33)*33),o=J(J(b+1,33)-1,4),o===-1&&(o=4),o}function Vt(e,l){const i=ve.length,s=e+621;let v=-14,o=ve[0],b,c,_,p,f;if(e<o||e>=ve[i-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<i&&(b=ve[f],c=b-o,!(e<b));f+=1)v=v+T(c,33)*8+T(J(c,33),4),o=b;p=e-o,v=v+T(p,33)*8+T(J(p,33)+3,4),J(c,33)===4&&c-p===4&&(v+=1);const D=T(s,4)-T((T(s,100)+1)*3,4)-150,O=20+v-D;return l||(c-p<6&&(p=p-c+T(c+4,33)*33),_=J(J(p+1,33)-1,4),_===-1&&(_=4)),{leap:_,gy:s,march:O}}function Ma(e,l,i){const s=Vt(e,!0);return ft(s.gy,3,s.march)+(l-1)*31-T(l,7)*(l-7)+i-1}function Da(e){const l=Tt(e).gy;let i=l-621,s,v,o;const b=Vt(i,!1),c=ft(l,3,b.march);if(o=e-c,o>=0){if(o<=185)return v=1+T(o,31),s=J(o,31)+1,{jy:i,jm:v,jd:s};o-=186}else i-=1,o+=179,b.leap===1&&(o+=1);return v=7+T(o,30),s=J(o,30)+1,{jy:i,jm:v,jd:s}}function ft(e,l,i){let s=T((e+T(l-8,6)+100100)*1461,4)+T(153*J(l+9,12)+2,5)+i-34840408;return s=s-T(T(e+100100+T(l-8,6),100)*3,4)+752,s}function Tt(e){let l=4*e+139361631;l=l+T(T(4*e+183187720,146097)*3,4)*4-3908;const i=T(J(l,1461),4)*5+308,s=T(J(i,153),5)+1,v=J(T(i,153),12)+1;return{gy:T(l,1461)-100100+T(8-v,6),gm:v,gd:s}}function T(e,l){return~~(e/l)}function J(e,l){return e-~~(e/l)*l}const _a=["gregorian","persian"],$t={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>_a.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},jt=["update:modelValue"];function oe(e){return e.year+"/"+Y(e.month)+"/"+Y(e.day)}function At(e,l){const i=M(()=>e.disable!==!0&&e.readonly!==!0),s=M(()=>e.editable===!0?0:-1),v=M(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function o(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function b(c){const _=new Date,p=c===!0?null:0;if(e.calendar==="persian"){const f=ha(_);return{year:f.jy,month:f.jm,day:f.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:p,minute:p,second:p,millisecond:p}}return{editable:i,tabindex:s,headerClass:v,getLocale:o,getCurrentDate:b}}const Ft=864e5,ba=36e5,ct=6e4,Nt="YYYY-MM-DDTHH:mm:ss.SSSZ",wa=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,xa=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,rt={};function ka(e,l){const i="("+l.days.join("|")+")",s=e+i;if(rt[s]!==void 0)return rt[s];const v="("+l.daysShort.join("|")+")",o="("+l.months.join("|")+")",b="("+l.monthsShort.join("|")+")",c={};let _=0;const p=e.replace(xa,D=>{switch(_++,D){case"YY":return c.YY=_,"(-?\\d{1,2})";case"YYYY":return c.YYYY=_,"(-?\\d{1,4})";case"M":return c.M=_,"(\\d{1,2})";case"MM":return c.M=_,"(\\d{2})";case"MMM":return c.MMM=_,b;case"MMMM":return c.MMMM=_,o;case"D":return c.D=_,"(\\d{1,2})";case"Do":return c.D=_++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=_,"(\\d{2})";case"H":return c.H=_,"(\\d{1,2})";case"HH":return c.H=_,"(\\d{2})";case"h":return c.h=_,"(\\d{1,2})";case"hh":return c.h=_,"(\\d{2})";case"m":return c.m=_,"(\\d{1,2})";case"mm":return c.m=_,"(\\d{2})";case"s":return c.s=_,"(\\d{1,2})";case"ss":return c.s=_,"(\\d{2})";case"S":return c.S=_,"(\\d{1})";case"SS":return c.S=_,"(\\d{2})";case"SSS":return c.S=_,"(\\d{3})";case"A":return c.A=_,"(AM|PM)";case"a":return c.a=_,"(am|pm)";case"aa":return c.aa=_,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=_,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=_,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=_,"(-?\\d+)";case"x":return c.x=_,"(-?\\d{4,})";default:return _--,D[0]==="["&&(D=D.substring(1,D.length-1)),D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:c,regex:new RegExp("^"+p)};return rt[s]=f,f}function Et(e,l){return e!==void 0?e:l!==void 0?l.date:Wt.date}function Dt(e,l=""){const i=e>0?"-":"+",s=Math.abs(e),v=Math.floor(s/60),o=s%60;return i+Y(v)+l+Y(o)}function Ne(e,l,i,s,v){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(v!==void 0&&Object.assign(o,v),e==null||e===""||typeof e!="string")return o;l===void 0&&(l=Nt);const b=Et(i,Ct.props),c=b.months,_=b.monthsShort,{regex:p,map:f}=ka(l,b),D=e.match(p);if(D===null)return o;let O="";if(f.X!==void 0||f.x!==void 0){const E=parseInt(D[f.X!==void 0?f.X:f.x],10);if(isNaN(E)===!0||E<0)return o;const Z=new Date(E*(f.X!==void 0?1e3:1));o.year=Z.getFullYear(),o.month=Z.getMonth()+1,o.day=Z.getDate(),o.hour=Z.getHours(),o.minute=Z.getMinutes(),o.second=Z.getSeconds(),o.millisecond=Z.getMilliseconds()}else{if(f.YYYY!==void 0)o.year=parseInt(D[f.YYYY],10);else if(f.YY!==void 0){const E=parseInt(D[f.YY],10);o.year=E<0?E:2e3+E}if(f.M!==void 0){if(o.month=parseInt(D[f.M],10),o.month<1||o.month>12)return o}else f.MMM!==void 0?o.month=_.indexOf(D[f.MMM])+1:f.MMMM!==void 0&&(o.month=c.indexOf(D[f.MMMM])+1);if(f.D!==void 0){if(o.day=parseInt(D[f.D],10),o.year===null||o.month===null||o.day<1)return o;const E=s!=="persian"?new Date(o.year,o.month,0).getDate():Ge(o.year,o.month);if(o.day>E)return o}f.H!==void 0?o.hour=parseInt(D[f.H],10)%24:f.h!==void 0&&(o.hour=parseInt(D[f.h],10)%12,(f.A&&D[f.A]==="PM"||f.a&&D[f.a]==="pm"||f.aa&&D[f.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),f.m!==void 0&&(o.minute=parseInt(D[f.m],10)%60),f.s!==void 0&&(o.second=parseInt(D[f.s],10)%60),f.S!==void 0&&(o.millisecond=parseInt(D[f.S],10)*10**(3-D[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(O=f.Z!==void 0?D[f.Z].replace(":",""):D[f.ZZ],o.timezoneOffset=(O[0]==="+"?-1:1)*(60*O.slice(1,3)+1*O.slice(3,5)))}return o.dateHash=Y(o.year,6)+"/"+Y(o.month)+"/"+Y(o.day),o.timeHash=Y(o.hour)+":"+Y(o.minute)+":"+Y(o.second)+O,o}function _t(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const i=new Date(l.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const s=l.getTimezoneOffset()-i.getTimezoneOffset();l.setHours(l.getHours()-s);const v=(l-i)/(Ft*7);return 1+Math.floor(v)}function re(e,l,i){const s=new Date(e),v=`set${i===!0?"UTC":""}`;switch(l){case"year":case"years":s[`${v}Month`](0);case"month":case"months":s[`${v}Date`](1);case"day":case"days":case"date":s[`${v}Hours`](0);case"hour":case"hours":s[`${v}Minutes`](0);case"minute":case"minutes":s[`${v}Seconds`](0);case"second":case"seconds":s[`${v}Milliseconds`](0)}return s}function Je(e,l,i){return(e.getTime()-e.getTimezoneOffset()*ct-(l.getTime()-l.getTimezoneOffset()*ct))/i}function Bt(e,l,i="days"){const s=new Date(e),v=new Date(l);switch(i){case"years":case"year":return s.getFullYear()-v.getFullYear();case"months":case"month":return(s.getFullYear()-v.getFullYear())*12+s.getMonth()-v.getMonth();case"days":case"day":case"date":return Je(re(s,"day"),re(v,"day"),Ft);case"hours":case"hour":return Je(re(s,"hour"),re(v,"hour"),ba);case"minutes":case"minute":return Je(re(s,"minute"),re(v,"minute"),ct);case"seconds":case"second":return Je(re(s,"second"),re(v,"second"),1e3)}}function bt(e){return Bt(e,re(e,"year"),"days")+1}function wt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const xt={YY(e,l,i){const s=this.YYYY(e,l,i)%100;return s>=0?Y(s):"-"+Y(Math.abs(s))},YYYY(e,l,i){return i!=null?i:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return Y(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return wt(this.Q(e))},D(e){return e.getDate()},Do(e){return wt(e.getDate())},DD(e){return Y(e.getDate())},DDD(e){return bt(e)},DDDD(e){return Y(bt(e),3)},d(e){return e.getDay()},dd(e,l){return this.dddd(e,l).slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return _t(e)},ww(e){return Y(_t(e))},H(e){return e.getHours()},HH(e){return Y(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return Y(this.h(e))},m(e){return e.getMinutes()},mm(e){return Y(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Y(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Y(Math.floor(e.getMilliseconds()/10))},SSS(e){return Y(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,l,i,s){const v=s==null?e.getTimezoneOffset():s;return Dt(v,":")},ZZ(e,l,i,s){const v=s==null?e.getTimezoneOffset():s;return Dt(v)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Pt(e,l,i,s,v){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;l===void 0&&(l=Nt);const b=Et(i,Ct.props);return l.replace(wa,(c,_)=>c in xt?xt[c](o,b,s,v):_===void 0?c:_.split("\\]").join("]"))}const De=20,qa=["Calendar","Years","Months"],kt=e=>qa.includes(e),it=e=>/^-?[\d]+\/[0-1]\d$/.test(e),He=" \u2014 ";function de(e){return e.year+"/"+Y(e.month)}const Ca=dt({name:"QDate",props:{...$t,...Yt,...St,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:it},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:it},navigationMaxYearMonth:{type:String,validator:it},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:kt}},emits:[...jt,"range-start","range-end","navigation"],setup(e,{slots:l,emit:i}){const{proxy:s}=vt(),{$q:v}=s,o=Ht(e,v),{getCache:b}=sa(),{tabindex:c,headerClass:_,getLocale:p,getCurrentDate:f}=At(e,v);let D;const O=pt(e),E=It(O),Z=N(null),I=N(Ue()),V=N(p()),Ee=M(()=>Ue()),_e=M(()=>p()),x=M(()=>f()),r=N(u(I.value,V.value)),S=N(e.defaultView),Be=v.lang.rtl===!0?"right":"left",se=N(Be.value),Q=N(Be.value),Oe=r.value.year,fe=N(Oe-Oe%De-(Oe<0?De:0)),K=N(null),me=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),G=M(()=>e.color||"primary"),ee=M(()=>e.textColor||"white"),R=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),le=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),P=M(()=>le.value.filter(t=>typeof t=="string").map(t=>Ae(t,I.value,V.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),te=M(()=>{const t=a=>Ae(a,I.value,V.value);return le.value.filter(a=>Jt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),be=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Mt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ie=M(()=>e.calendar==="persian"?oe:(t,a,n)=>Pt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?I.value:a,n===void 0?V.value:n,t.year,t.timezoneOffset)),ce=M(()=>P.value.length+te.value.reduce((t,a)=>t+1+Bt(be.value(a.to),be.value(a.from)),0)),he=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(K.value!==null){const n=K.value.init,g=be.value(n);return V.value.daysShort[g.getDay()]+", "+V.value.monthsShort[n.month-1]+" "+n.day+He+"?"}if(ce.value===0)return He;if(ce.value>1)return`${ce.value} ${V.value.pluralDay}`;const t=P.value[0],a=be.value(t);return isNaN(a.valueOf())===!0?He:V.value.headerTitle!==void 0?V.value.headerTitle(a,t):V.value.daysShort[a.getDay()]+", "+V.value.monthsShort[t.month-1]+" "+t.day}),Pe=M(()=>P.value.concat(te.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Ve=M(()=>P.value.concat(te.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),Le=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ce.value===0)return He;if(ce.value>1){const t=Pe.value,a=Ve.value,n=V.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+He+n[a.month-1]+" ":t.month!==a.month?He+n[a.month-1]:"")+" "+a.year}return P.value[0].year}),we=M(()=>{const t=[v.iconSet.datetime.arrowLeft,v.iconSet.datetime.arrowRight];return v.lang.rtl===!0?t.reverse():t}),xe=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):V.value.firstDayOfWeek),Te=M(()=>{const t=V.value.daysShort,a=xe.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ne=M(()=>{const t=r.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ge(t.year,t.month)}),Ze=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),F=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),B=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),$e=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return F.value!==null&&F.value.year>=r.value.year&&(t.year.prev=!1,F.value.year===r.value.year&&F.value.month>=r.value.month&&(t.month.prev=!1)),B.value!==null&&B.value.year<=r.value.year&&(t.year.next=!1,B.value.year===r.value.year&&B.value.month<=r.value.month&&(t.month.next=!1)),t}),ke=M(()=>{const t={};return P.value.forEach(a=>{const n=de(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),Qe=M(()=>{const t={};return te.value.forEach(a=>{const n=de(a.from),g=de(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===g?a.to.day:void 0,range:a}),n<g){let h;const{year:H,month:y}=a.from,k=y<12?{year:H,month:y+1}:{year:H+1,month:1};for(;(h=de(k))<=g;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===g?a.to.day:void 0,range:a}),k.month++,k.month>12&&(k.year++,k.month=1)}}),t}),ge=M(()=>{if(K.value===null)return;const{init:t,initHash:a,final:n,finalHash:g}=K.value,[h,H]=a<=g?[t,n]:[n,t],y=de(h),k=de(H);if(y!==U.value&&k!==U.value)return;const j={};return y===U.value?(j.from=h.day,j.includeFrom=!0):j.from=1,k===U.value?(j.to=H.day,j.includeTo=!0):j.to=ne.value,j}),U=M(()=>de(r.value)),et=M(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ne.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ne.value;n++){const g=U.value+"/"+Y(n);t[n]=a(g)}return t}),tt=M(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ne.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ne.value;n++){const g=U.value+"/"+Y(n);t[n]=a(g)===!0&&Ze.value(g)}}return t}),qe=M(()=>{let t,a;const{year:n,month:g}=r.value;if(e.calendar!=="persian")t=new Date(n,g-1,1),a=new Date(n,g-1,0).getDate();else{const h=Mt(n,g,1);t=new Date(h.gy,h.gm-1,h.gd);let H=g-1,y=n;H===0&&(H=12,y--),a=Ge(y,H)}return{days:t.getDay()-xe.value-1,endDay:a}}),ye=M(()=>{const t=[],{days:a,endDay:n}=qe.value,g=a<0?a+7:a;if(g<6)for(let y=n-g;y<=n;y++)t.push({i:y,fill:!0});const h=t.length;for(let y=1;y<=ne.value;y++){const k={i:y,event:tt.value[y],classes:[]};et.value[y]===!0&&(k.in=!0,k.flat=!0),t.push(k)}if(ke.value[U.value]!==void 0&&ke.value[U.value].forEach(y=>{const k=h+y-1;Object.assign(t[k],{selected:!0,unelevated:!0,flat:!1,color:G.value,textColor:ee.value})}),Qe.value[U.value]!==void 0&&Qe.value[U.value].forEach(y=>{if(y.from!==void 0){const k=h+y.from-1,j=h+(y.to||ne.value)-1;for(let ut=k;ut<=j;ut++)Object.assign(t[ut],{range:y.range,unelevated:!0,color:G.value,textColor:ee.value});Object.assign(t[k],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[j],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const k=h+y.to-1;for(let j=h;j<=k;j++)Object.assign(t[j],{range:y.range,unelevated:!0,color:G.value,textColor:ee.value});Object.assign(t[k],{flat:!1,rangeTo:!0})}else{const k=h+ne.value-1;for(let j=h;j<=k;j++)Object.assign(t[j],{range:y.range,unelevated:!0,color:G.value,textColor:ee.value})}}),ge.value!==void 0){const y=h+ge.value.from-1,k=h+ge.value.to-1;for(let j=y;j<=k;j++)t[j].color=G.value,t[j].editRange=!0;ge.value.includeFrom===!0&&(t[y].editRangeFrom=!0),ge.value.includeTo===!0&&(t[k].editRangeTo=!0)}r.value.year===x.value.year&&r.value.month===x.value.month&&(t[h+x.value.day-1].today=!0);const H=t.length%7;if(H>0){const y=7-H;for(let k=1;k<=y;k++)t.push({i:k,fill:!0})}return t.forEach(y=>{let k="q-date__calendar-item ";y.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(k+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(k+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(k+=` text-${y.color}`)),y.classes=k}),t}),Ce=M(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});ie(()=>e.modelValue,t=>{if(D===t)D=0;else{const{year:a,month:n}=u(I.value,V.value);X(a,n)}}),ie(S,()=>{Z.value!==null&&Z.value.focus()}),ie(()=>r.value.year,t=>{i("navigation",{year:t,month:r.value.month})}),ie(()=>r.value.month,t=>{i("navigation",{year:r.value.year,month:t})}),ie(Ee,t=>{ht(t,V.value,"mask"),I.value=t}),ie(_e,t=>{ht(I.value,t,"locale"),V.value=t});function Ke(){const t=x.value,a=ke.value[de(t)];(a===void 0||a.includes(t.day)===!1)&&at(t),ue(t.year,t.month)}function ze(t){kt(t)===!0&&(S.value=t)}function Re(t,a){["month","year"].includes(t)&&(t==="month"?w:q)(a===!0?-1:1)}function ue(t,a){S.value="Calendar",X(t,a)}function je(t,a){if(e.range===!1||!t){K.value=null;return}const n=Object.assign({...r.value},t),g=a!==void 0?Object.assign({...r.value},a):n;K.value={init:n,initHash:oe(n),final:g,finalHash:oe(g)},ue(n.year,n.month)}function Ue(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ae(t,a,n){return Ne(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function u(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return d();const g=n[n.length-1],h=Ae(g.from!==void 0?g.from:g,t,a);return h.dateHash===null?d():h}function d(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=x.value!==void 0?x.value:f();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+Y(a)+"/01"}}function w(t){let a=r.value.year,n=Number(r.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),X(a,n),R.value===!0&&Ye("month")}function q(t){const a=Number(r.value.year)+t;X(a,r.value.month),R.value===!0&&Ye("year")}function $(t){X(t,r.value.month),S.value=e.defaultView==="Years"?"Months":"Calendar",R.value===!0&&Ye("year")}function W(t){X(r.value.year,t),S.value="Calendar",R.value===!0&&Ye("month")}function C(t,a){const n=ke.value[a];(n!==void 0&&n.includes(t.day)===!0?nt:at)(t)}function A(t){return{year:t.year,month:t.month,day:t.day}}function X(t,a){F.value!==null&&t<=F.value.year&&(t=F.value.year,a<F.value.month&&(a=F.value.month)),B.value!==null&&t>=B.value.year&&(t=B.value.year,a>B.value.month&&(a=B.value.month));const n=t+"/"+Y(a)+"/01";n!==r.value.dateHash&&(se.value=r.value.dateHash<n==(v.lang.rtl!==!0)?"left":"right",t!==r.value.year&&(Q.value=se.value),st(()=>{fe.value=t-t%De-(t<0?De:0),Object.assign(r.value,{year:t,month:a,day:1,dateHash:n})}))}function Xe(t,a,n){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;D=g;const{reason:h,details:H}=mt(a,n);i("update:modelValue",g,h,H)}function Ye(t){const a=P.value[0]!==void 0&&P.value[0].dateHash!==null?{...P.value[0]}:{...r.value};st(()=>{a.year=r.value.year,a.month=r.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ge(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const g=Se(a);D=g;const{details:h}=mt("",a);i("update:modelValue",g,t,h)})}function mt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...A(a.target),from:A(a.from),to:A(a.to)}}:{reason:`${t}-day`,details:A(a)}}function Se(t,a,n){return t.from!==void 0?{from:Ie.value(t.from,a,n),to:Ie.value(t.to,a,n)}:Ie.value(t,a,n)}function at(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=oe(t.from),g=oe(t.to),h=P.value.filter(y=>y.dateHash<n||y.dateHash>g),H=te.value.filter(({from:y,to:k})=>k.dateHash<n||y.dateHash>g);a=h.concat(H).concat(t).map(y=>Se(y))}else{const n=le.value.slice();n.push(Se(t)),a=n}else a=Se(t);Xe(a,"add",t)}function nt(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=Se(t);t.from!==void 0?a=e.modelValue.filter(g=>g.from!==void 0?g.from!==n.from&&g.to!==n.to:!0):a=e.modelValue.filter(g=>g!==n),a.length===0&&(a=null)}Xe(a,"remove",t)}function ht(t,a,n){const g=P.value.concat(te.value).map(h=>Se(h,t,a)).filter(h=>h.from!==void 0?h.from.dateHash!==null&&h.to.dateHash!==null:h.dateHash!==null);i("update:modelValue",(e.multiple===!0?g:g[0])||null,n)}function Lt(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+_.value},[m("div",{class:"relative-position"},[m(pe,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+Le.value,class:"q-date__header-subtitle q-date__header-link "+(S.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...b("vY",{onClick(){S.value="Years"},onKeyup(t){t.keyCode===13&&(S.value="Years")}})},[Le.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(pe,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+he.value,class:"q-date__header-title-label q-date__header-link "+(S.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...b("vC",{onClick(){S.value="Calendar"},onKeyup(t){t.keyCode===13&&(S.value="Calendar")}})},[he.value]))]),e.todayBtn===!0?m(L,{class:"q-date__header-today self-start",icon:v.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:Ke}):null])])}function lt({label:t,type:a,key:n,dir:g,goTo:h,boundaries:H,cls:y}){return[m("div",{class:"row items-center q-date__arrow"},[m(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[0],tabindex:c.value,disable:H.prev===!1,...b("go-#"+a,{onClick(){h(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+y},[m(pe,{name:"q-transition--jump-"+g},()=>m("div",{key:n},[m(L,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...b("view#"+a,{onClick:()=>{S.value=a}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[1],tabindex:c.value,disable:H.next===!1,...b("go+#"+a,{onClick(){h(1)}})})])]}const Zt={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},lt({label:V.value.months[r.value.month-1],type:"Months",key:r.value.month,dir:se.value,goTo:w,boundaries:$e.value.month,cls:" col"}).concat(lt({label:r.value.year,type:"Years",key:r.value.year,dir:Q.value,goTo:q,boundaries:$e.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Te.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(pe,{name:"q-transition--slide-"+se.value},()=>m("div",{key:U.value,class:"q-date__calendar-days fit"},ye.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(L,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...b("day#"+t.i,{onClick:()=>{Qt(t.i)},onMouseover:()=>{Kt(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=r.value.year===x.value.year,a=g=>F.value!==null&&r.value.year===F.value.year&&F.value.month>g||B.value!==null&&r.value.year===B.value.year&&B.value.month<g,n=V.value.monthsShort.map((g,h)=>{const H=r.value.month===h+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(L,{class:t===!0&&x.value.month===h+1?"q-date__today":null,flat:H!==!0,label:g,unelevated:H,color:H===!0?G.value:null,textColor:H===!0?ee.value:null,tabindex:c.value,disable:a(h+1),...b("month#"+h,{onClick:()=>{W(h+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(m("div",{class:"row no-wrap full-width"},[lt({label:r.value.year,type:"Years",key:r.value.year,dir:Q.value,goTo:q,boundaries:$e.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=fe.value,a=t+De,n=[],g=h=>F.value!==null&&F.value.year>h||B.value!==null&&B.value.year<h;for(let h=t;h<=a;h++){const H=r.value.year===h;n.push(m("div",{class:"q-date__years-item flex flex-center"},[m(L,{key:"yr"+h,class:x.value.year===h?"q-date__today":null,flat:!H,label:h,dense:!0,unelevated:H,color:H===!0?G.value:null,textColor:H===!0?ee.value:null,tabindex:c.value,disable:g(h),...b("yr#"+h,{onClick:()=>{$(h)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(L,{round:!0,dense:!0,flat:!0,icon:we.value[0],tabindex:c.value,disable:g(t),...b("y-",{onClick:()=>{fe.value-=De}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},n),m("div",{class:"col-auto"},[m(L,{round:!0,dense:!0,flat:!0,icon:we.value[1],tabindex:c.value,disable:g(a),...b("y+",{onClick:()=>{fe.value+=De}})})])])}};function Qt(t){const a={...r.value,day:t};if(e.range===!1){C(a,U.value);return}if(K.value===null){const n=ye.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&n.range!==void 0){nt({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){nt(a);return}const g=oe(a);K.value={init:a,initHash:g,final:a,finalHash:g},i("range-start",A(a))}else{const n=K.value.initHash,g=oe(a),h=n<=g?{from:K.value.init,to:a}:{from:a,to:K.value.init};K.value=null,at(n===g?a:{target:a,...h}),i("range-end",{from:A(h.from),to:A(h.to)})}}function Kt(t){if(K.value!==null){const a={...r.value,day:t};Object.assign(K.value,{final:a,finalHash:oe(a)})}}return Object.assign(s,{setToday:Ke,setView:ze,offsetCalendar:Re,setCalendarTo:ue,setEditingRange:je}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(pe,{name:"q-transition--fade"},Zt[S.value])])],a=Ot(l.default);return a!==void 0&&t.push(m("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&E(t,"push"),m("div",{class:me.value,...Ce.value},[Lt(),m("div",{ref:Z,class:"q-date__main col column",tabindex:-1},t)])}}});function Ya(e,l){if(e.hour!==null){if(e.minute===null)return"minute";if(l===!0&&e.second===null)return"second"}return"hour"}function Sa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Ha=dt({name:"QTime",props:{...St,...Yt,...$t,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:jt,setup(e,{slots:l,emit:i}){const s=vt(),{$q:v}=s.proxy,o=Ht(e,v),{tabindex:b,headerClass:c,getLocale:_,getCurrentDate:p}=At(e,v),f=pt(e),D=It(f);let O,E;const Z=N(null),I=M(()=>Le()),V=M(()=>_()),Ee=M(()=>we()),_e=Ne(e.modelValue,I.value,V.value,e.calendar,Ee.value),x=N(Ya(_e)),r=N(_e),S=N(_e.hour===null||_e.hour<12),Be=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(o.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),se=M(()=>{const u=r.value;return{hour:u.hour===null?"--":Q.value===!0?Y(u.hour):String(S.value===!0?u.hour===0?12:u.hour:u.hour>12?u.hour-12:u.hour),minute:u.minute===null?"--":Y(u.minute),second:u.second===null?"--":Y(u.second)}}),Q=M(()=>e.format24h!==null?e.format24h:v.lang.date.format24h),Oe=M(()=>{const u=x.value==="hour",d=u===!0?12:60,w=r.value[x.value];let $=`rotate(${Math.round(w*(360/d))-180}deg) translateX(-50%)`;return u===!0&&Q.value===!0&&r.value.hour>=12&&($+=" scale(.7)"),{transform:$}}),fe=M(()=>r.value.hour!==null),K=M(()=>fe.value===!0&&r.value.minute!==null),me=M(()=>e.hourOptions!==void 0?u=>e.hourOptions.includes(u):e.options!==void 0?u=>e.options(u,null,null):null),G=M(()=>e.minuteOptions!==void 0?u=>e.minuteOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,u,null):null),ee=M(()=>e.secondOptions!==void 0?u=>e.secondOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,r.value.minute,u):null),R=M(()=>{if(me.value===null)return null;const u=he(0,11,me.value),d=he(12,11,me.value);return{am:u,pm:d,values:u.values.concat(d.values)}}),le=M(()=>G.value!==null?he(0,59,G.value):null),P=M(()=>ee.value!==null?he(0,59,ee.value):null),te=M(()=>{switch(x.value){case"hour":return R.value;case"minute":return le.value;case"second":return P.value}}),be=M(()=>{let u,d,w=0,q=1;const $=te.value!==null?te.value.values:void 0;x.value==="hour"?Q.value===!0?(u=0,d=23):(u=0,d=11,S.value===!1&&(w=12)):(u=0,d=55,q=5);const W=[];for(let C=u,A=u;C<=d;C+=q,A++){const X=C+w,Xe=$!==void 0&&$.includes(X)===!1,Ye=x.value==="hour"&&C===0?Q.value===!0?"00":"12":C;W.push({val:X,index:A,disable:Xe,label:Ye})}return W}),Ie=M(()=>[[ca,ne,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ie(()=>e.modelValue,u=>{const d=Ne(u,I.value,V.value,e.calendar,Ee.value);(d.dateHash!==r.value.dateHash||d.timeHash!==r.value.timeHash)&&(r.value=d,d.hour===null?x.value="hour":S.value=d.hour<12)}),ie([I,V],()=>{st(()=>{je()})});function ce(){const u={...p(),...Sa()};je(u),Object.assign(r.value,u),x.value="hour"}function he(u,d,w){const q=Array.apply(null,{length:d+1}).map(($,W)=>{const C=W+u;return{index:C,val:w(C)===!0}}).filter($=>$.val===!0).map($=>$.index);return{min:q[0],max:q[q.length-1],values:q,threshold:d+1}}function Pe(u,d,w){const q=Math.abs(u-d);return Math.min(q,w-q)}function Ve(u,{min:d,max:w,values:q,threshold:$}){if(u===d)return d;if(u<d||u>w)return Pe(u,d,$)<=Pe(u,w,$)?d:w;const W=q.findIndex(X=>u<=X),C=q[W-1],A=q[W];return u-C<=A-u?C:A}function Le(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function we(){if(typeof e.defaultDate!="string"){const u=p(!0);return u.dateHash=oe(u),u}return Ne(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function xe(){return ea(s)===!0||te.value!==null&&(te.value.values.length===0||x.value==="hour"&&Q.value!==!0&&R.value[S.value===!0?"am":"pm"].values.length===0)}function Te(){const u=Z.value,{top:d,left:w,width:q}=u.getBoundingClientRect(),$=q/2;return{top:d+$,left:w+$,dist:$*.7}}function ne(u){if(xe()!==!0){if(u.isFirst===!0){O=Te(),E=F(u.evt,O);return}E=F(u.evt,O,E),u.isFinal===!0&&(O=!1,E=null,Ze())}}function Ze(){x.value==="hour"?x.value="minute":e.withSeconds&&x.value==="minute"&&(x.value="second")}function F(u,d,w){const q=Gt(u),$=Math.abs(q.top-d.top),W=Math.sqrt(Math.pow(Math.abs(q.top-d.top),2)+Math.pow(Math.abs(q.left-d.left),2));let C,A=Math.asin($/W)*(180/Math.PI);if(q.top<d.top?A=d.left<q.left?90-A:270+A:A=d.left<q.left?A+90:270-A,x.value==="hour"){if(C=A/30,R.value!==null){const X=Q.value!==!0?S.value===!0:R.value.am.values.length>0&&R.value.pm.values.length>0?W>=d.dist:R.value.am.values.length>0;C=Ve(C+(X===!0?0:12),R.value[X===!0?"am":"pm"])}else C=Math.round(C),Q.value===!0?W<d.dist?C<12&&(C+=12):C===12&&(C=0):S.value===!0&&C===12?C=0:S.value===!1&&C!==12&&(C+=12);Q.value===!0&&(S.value=C<12)}else C=Math.round(A/6)%60,x.value==="minute"&&le.value!==null?C=Ve(C,le.value):x.value==="second"&&P.value!==null&&(C=Ve(C,P.value));return w!==C&&Ke[x.value](C),C}const B={hour(){x.value="hour"},minute(){x.value="minute"},second(){x.value="second"}};function $e(u){u.keyCode===13&&ze()}function ke(u){u.keyCode===13&&Re()}function Qe(u){xe()!==!0&&(v.platform.is.desktop!==!0&&F(u,Te()),Ze())}function ge(u){xe()!==!0&&F(u,Te())}function U(u){if(u.keyCode===13)x.value="hour";else if([37,39].includes(u.keyCode)){const d=u.keyCode===37?-1:1;if(R.value!==null){const w=Q.value===!0?R.value.values:R.value[S.value===!0?"am":"pm"].values;if(w.length===0)return;if(r.value.hour===null)qe(w[0]);else{const q=(w.length+w.indexOf(r.value.hour)+d)%w.length;qe(w[q])}}else{const w=Q.value===!0?24:12,q=Q.value!==!0&&S.value===!1?12:0,$=r.value.hour===null?-d:r.value.hour;qe(q+(24+$+d)%w)}}}function et(u){if(u.keyCode===13)x.value="minute";else if([37,39].includes(u.keyCode)){const d=u.keyCode===37?-1:1;if(le.value!==null){const w=le.value.values;if(w.length===0)return;if(r.value.minute===null)ye(w[0]);else{const q=(w.length+w.indexOf(r.value.minute)+d)%w.length;ye(w[q])}}else{const w=r.value.minute===null?-d:r.value.minute;ye((60+w+d)%60)}}}function tt(u){if(u.keyCode===13)x.value="second";else if([37,39].includes(u.keyCode)){const d=u.keyCode===37?-1:1;if(P.value!==null){const w=P.value.values;if(w.length===0)return;if(r.value.seconds===null)Ce(w[0]);else{const q=(w.length+w.indexOf(r.value.second)+d)%w.length;Ce(w[q])}}else{const w=r.value.second===null?-d:r.value.second;Ce((60+w+d)%60)}}}function qe(u){r.value.hour!==u&&(r.value.hour=u,ue())}function ye(u){r.value.minute!==u&&(r.value.minute=u,ue())}function Ce(u){r.value.second!==u&&(r.value.second=u,ue())}const Ke={hour:qe,minute:ye,second:Ce};function ze(){S.value===!1&&(S.value=!0,r.value.hour!==null&&(r.value.hour-=12,ue()))}function Re(){S.value===!0&&(S.value=!1,r.value.hour!==null&&(r.value.hour+=12,ue()))}function ue(){if(me.value!==null&&me.value(r.value.hour)!==!0){r.value=Ne(),x.value="hour";return}if(G.value!==null&&G.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,x.value="minute";return}if(e.withSeconds===!0&&ee.value!==null&&ee.value(r.value.second)!==!0){r.value.second=null,x.value="second";return}r.value.hour===null||r.value.minute===null||e.withSeconds===!0&&r.value.second===null||je()}function je(u){const d=Object.assign({...r.value},u),w=e.calendar==="persian"?Y(d.hour)+":"+Y(d.minute)+(e.withSeconds===!0?":"+Y(d.second):""):Pt(new Date(d.year,d.month===null?null:d.month-1,d.day,d.hour,d.minute,d.second,d.millisecond),I.value,V.value,d.year,d.timezoneOffset);d.changed=w!==e.modelValue,i("update:modelValue",w,d)}function Ue(){const u=[m("div",{class:"q-time__link "+(x.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:B.hour,onKeyup:U},se.value.hour),m("div",":"),m("div",fe.value===!0?{class:"q-time__link "+(x.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:et,onClick:B.minute}:{class:"q-time__link"},se.value.minute)];e.withSeconds===!0&&u.push(m("div",":"),m("div",K.value===!0?{class:"q-time__link "+(x.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:tt,onClick:B.second}:{class:"q-time__link"},se.value.second));const d=[m("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},u)];return Q.value===!1&&d.push(m("div",{class:"q-time__header-ampm column items-between no-wrap"},[m("div",{class:"q-time__link "+(S.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:ze,onKeyup:$e},"AM"),m("div",{class:"q-time__link "+(S.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:Re,onKeyup:ke},"PM")])),m("div",{class:"q-time__header flex flex-center no-wrap "+c.value},d)}function Ae(){const u=r.value[x.value];return m("div",{class:"q-time__content col relative-position"},[m(pe,{name:"q-transition--scale"},()=>m("div",{key:"clock"+x.value,class:"q-time__container-parent absolute-full"},[m("div",{ref:Z,class:"q-time__container-child fit overflow-hidden"},[Fe(m("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Qe,onMousedown:ge},[m("div",{class:"q-time__clock-circle fit"},[m("div",{class:"q-time__clock-pointer"+(r.value[x.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:Oe.value}),be.value.map(d=>m("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${d.index}`+(d.val===u?" q-time__clock-position--active "+c.value:d.disable===!0?" q-time__clock-position--disable":"")},[m("span",d.label)]))])]),Ie.value)])])),e.nowBtn===!0?m(L,{class:"q-time__now-button absolute",icon:v.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:b.value,onClick:ce}):null])}return s.proxy.setNow=ce,()=>{const u=[Ae()],d=Ot(l.default);return d!==void 0&&u.push(m("div",{class:"q-time__actions"},d)),e.name!==void 0&&e.disable!==!0&&D(u,"push"),m("div",{class:Be.value,tabindex:-1},[Ue(),m("div",{class:"q-time__main col overflow-auto"},u)])}}}),qt=dt({name:"QPopupProxy",props:{...da,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:i,attrs:s}){const{proxy:v}=vt(),{$q:o}=v,b=N(!1),c=N(null),_=M(()=>parseInt(e.breakpoint,10)),{canShow:p}=va({showing:b});function f(){return o.screen.width<_.value||o.screen.height<_.value?"dialog":"menu"}const D=N(f()),O=M(()=>D.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>f(),I=>{b.value!==!0&&(D.value=I)});function E(I){b.value=!0,i("show",I)}function Z(I){b.value=!1,D.value=f(),i("hide",I)}return Object.assign(v,{show(I){p(I)===!0&&c.value.show(I)},hide(I){c.value.hide(I)},toggle(I){c.value.toggle(I)}}),()=>{const I={ref:c,...O.value,...s,onShow:E,onHide:Z};let V;return D.value==="dialog"?V=ta:(V=fa,Object.assign(I,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),m(V,I,l.default)}}}),pa={class:"row items-center justify-end q-gutter-sm"},Oa={class:"row items-center justify-end q-gutter-sm"},Ea=aa({__name:"CreatedDateInput",setup(e){var p;const{log:l}=na(),i=la(),s=N(null),v=N(""),o=N("");try{(p=i.selected)!=null&&p.createdDate?b(i.selectedItem.createdDate):b(),i.validateItem.createdDate=!0}catch(f){l.error("CreatedDateInput:Setup",f)}function b(f=new Date().toISOString()){i.temporaryItem.createdDate=new Date(f).toISOString(),v.value=ua(f)||"",i.validateItem.createdDate=!0}function c(){o.value&&b(o.value)}function _(){var f;i.validateItem.createdDate=!!((f=s==null?void 0:s.value)!=null&&f.validate())}return(f,D)=>(oa(),ra(z(ia),{modelValue:v.value,"onUpdate:modelValue":D[5]||(D[5]=O=>v.value=O),ref_key:"inputRef",ref:s,label:"Created Date",rules:[O=>z(ma)(O)||"Date must be of format YYYY-MM-DDTHH:MM:SS.###Z"],dense:"",outlined:"",disable:"",color:"primary",onBlur:D[6]||(D[6]=O=>_())},{after:Me(()=>[ae(z(L),{icon:z(ot).CALENDAR_DATE,color:"primary",class:"q-ml-xs q-px-sm"},{default:Me(()=>[ae(z(qt),{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Me(()=>[ae(z(Ca),{modelValue:o.value,"onUpdate:modelValue":D[1]||(D[1]=O=>o.value=O),mask:"YYYY-MM-DDTHH:mm:ss.000Z"},{default:Me(()=>[gt("div",pa,[Fe(ae(z(L),{label:"Cancel",flat:""},null,512),[[We]]),Fe(ae(z(L),{label:"OK",color:"primary",flat:"",onClick:D[0]||(D[0]=O=>c())},null,512),[[We]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["icon"]),ae(z(L),{icon:z(ot).TIME,color:"primary",class:"q-ml-sm q-px-sm"},{default:Me(()=>[ae(z(qt),{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Me(()=>[ae(z(Ha),{modelValue:o.value,"onUpdate:modelValue":D[3]||(D[3]=O=>o.value=O),"now-btn":"",mask:"YYYY-MM-DDTHH:mm:ss.000Z"},{default:Me(()=>[gt("div",Oa,[Fe(ae(z(L),{label:"Cancel",flat:""},null,512),[[We]]),Fe(ae(z(L),{label:"OK",color:"primary",flat:"",onClick:D[2]||(D[2]=O=>c())},null,512),[[We]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["icon"]),ae(z(L),{icon:z(ot).CALENDAR_CHECK,color:"positive",class:"q-ml-sm q-px-sm",onClick:D[4]||(D[4]=O=>b())},null,8,["icon"])]),_:1},8,["modelValue","rules"]))}});export{Ea as default};
