import{Q as z}from"./QPage.16e15d7e.js";import{d as w,o as W,c as q,w as g,a as t,u as e,Q as T,b as O,I as v,e as F,t as R,A as G,f as A,R as B,g as V,h as N,i as $,j as P,r as h,k as Q,D as i,l as s,m as L,F as b,n as K,p as l,q as X,s as J,N as j,v as Z,x as ee,y as te,O as ae,E as oe,z as M,W as se,B as re,C as ne}from"./index.be381c74.js";import{u as H,Q as Y}from"./index.a6fc42ab.js";import"./index.92c41530.js";const ie=w({__name:"MessageCard",setup(c){return(a,o)=>(W(),q(e(V),null,{default:g(()=>[t(e(T),{class:"bg-primary text-white q-py-sm text-h5"},{default:g(()=>[t(O,{class:"q-pb-xs q-pr-sm",name:e(v).DASHBOARD},null,8,["name"]),F(" Dashboard ")]),_:1}),t(e(T),null,{default:g(()=>[F(R(e(G).APP_NAME)+` allows you to track available workouts from the list below. Make sure you create some or load the default workouts if you don't see any. You can also track body measurements by clicking the "Take Measurements" button. `,1)]),_:1}),t(e(T),null,{default:g(()=>[t(A,{color:"positive",to:{name:e(B).TAKE_MEASUREMENTS},icon:e(v).MEASUREMENTS,label:"Take Measurements"},null,8,["to","icon"])]),_:1})]),_:1}))}}),le={key:0,class:"col-sm-6 col-xs-12"},ue={class:"text-h6 q-mb-sm"},ce={class:"text-caption q-ml-xs"},de=l("span",{class:"text-caption q-ml-xs"},"In progress workout",-1),me=w({__name:"ResumeWorkoutCard",setup(c){const{log:a}=N(),{confirmDialog:o}=$(),r=P(),E=h(new Date("")),f=H(E),p=h(null),S=h("");Q(async()=>{const d=(await i.getAll(s.ACTIVE_WORKOUTS))[0];E.value=new Date((d==null?void 0:d.createdDate)||"")}),L(async()=>{var d,_;try{if(p.value=(await i.getAll(s.ACTIVE_WORKOUTS))[0],(d=p.value)!=null&&d.parentId){const m=await i.getFirstByField(s.WORKOUTS,b.ID,(_=p.value)==null?void 0:_.parentId);S.value=m==null?void 0:m.name}}catch(m){a.error("ResumeWorkoutCard:onMounted",m)}});async function x(){o("Delete Active Workout","Do you want to delete the currently active workout?",v.DELETE,j.ERROR,async()=>{try{await i.clear(s.ACTIVE_WORKOUTS),await i.clear(s.ACTIVE_EXERCISES),p.value=null}catch(d){a.error("ResumeWorkoutCarde:deleteActiveWorkout",d)}})}function U(){r.push({name:B.ACTIVE_WORKOUT})}return(d,_)=>p.value?(W(),K("div",le,[t(e(V),null,{default:g(()=>[t(e(T),{class:"q-pt-sm"},{default:g(()=>{var m;return[l("div",ue,R(S.value),1),t(e(A),{round:"",flat:"",icon:"delete_forever",color:"negative",class:"absolute-top-right q-ma-sm",onClick:_[0]||(_[0]=I=>x())}),l("div",null,[t(e(Y),{class:"q-py-xs q-mb-xs",rounded:"",color:"grey-9",label:e(f)||"never"},null,8,["label"])]),l("div",null,[t(e(O),{name:"start"}),l("span",ce,R(e(X)((m=p.value)==null?void 0:m.createdDate)||"-"),1)]),l("div",null,[t(e(O),{name:"directions_run"}),de]),t(e(A),{color:"positive",class:"full-width q-mt-md",label:"Resume",onClick:_[1]||(_[1]=I=>U())})]}),_:1})]),_:1})])):J("",!0)}}),pe=Z({id:"begin-workouts",state:()=>({beginWorkoutCards:[]}),actions:{async updateBeginWorkoutCards(c){const a=(await c.getAll(s.WORKOUTS)).sort((o,r)=>o.name.localeCompare(r.name));this.beginWorkoutCards=await Promise.all(a.map(async o=>{const r=await c.getNewestByField(s.WORKOUT_RECORDS,b.PARENT_ID,o.id);return{id:o.id,name:o.name,previousCreatedDate:r==null?void 0:r.createdDate,previousFinishedDate:r==null?void 0:r.finishedDate}}))}}}),_e={class:"text-h6 q-mb-sm"},ge={class:"text-caption q-ml-xs"},Ce={class:"text-caption q-ml-xs"},ke=w({__name:"BeginWorkoutCard",props:{beginWorkoutCard:null},setup(c){var I;const a=c,{log:o}=N(),{confirmDialog:r}=$(),E=P(),f=ee(),p=h(new Date(((I=a.beginWorkoutCard)==null?void 0:I.previousCreatedDate)||"")),S=H(p),x=h("-");Q(()=>{var n;p.value=new Date(((n=a.beginWorkoutCard)==null?void 0:n.previousCreatedDate)||""),x.value=d()});async function U(){var n;try{const u=await i.getFirstByField(s.WORKOUTS,b.ID,(n=a.beginWorkoutCard)==null?void 0:n.id);f.openDialog(s.WORKOUTS,ae.REPORT,u)}catch(u){o.error("BeginWorkoutCard:onReportDialog",u)}}function d(){var D,C;const n=new Date(((D=a.beginWorkoutCard)==null?void 0:D.previousCreatedDate)||"").getTime(),k=new Date(((C=a.beginWorkoutCard)==null?void 0:C.previousFinishedDate)||"").getTime()-n;return te(k)}async function _(){const n=await i.getAll(s.ACTIVE_WORKOUTS);n&&n[0]?r("Replace Current Workout","You have a workout that is currently in progress. Do you want to replace it?",v.RENEW,j.WARN,async()=>{try{await m(),E.push({name:B.ACTIVE_WORKOUT})}catch(u){o.error("BeginWorkoutCard:beginWorkout",u)}}):(await m(),E.push({name:B.ACTIVE_WORKOUT}))}async function m(){var D;await i.clear(s.ACTIVE_WORKOUTS),await i.clear(s.ACTIVE_EXERCISES);const n=await i.getFirstByField(s.WORKOUTS,b.ID,(D=a.beginWorkoutCard)==null?void 0:D.id),k=(await Promise.all(n.exerciseIds.map(async C=>await i.getFirstByField(s.EXERCISES,b.ID,C)))).map(C=>new oe({id:M(),createdDate:new Date().toISOString(),parentId:C.id,weight:[],reps:[]})),y=new se({id:M(),createdDate:new Date().toISOString(),parentId:n.id,finishedDate:"",exerciseRecordIds:k.map(C=>C.id)});await i.add(s.ACTIVE_WORKOUTS,y),await i.bulkAdd(s.ACTIVE_EXERCISES,k)}return(n,u)=>(W(),q(e(V),null,{default:g(()=>[t(e(T),{class:"q-pt-sm"},{default:g(()=>{var k,y;return[l("div",_e,R((k=c.beginWorkoutCard)==null?void 0:k.name),1),t(e(A),{round:"",flat:"",icon:e(v).REPORT,class:"absolute-top-right q-ma-sm",onClick:u[0]||(u[0]=D=>U())},null,8,["icon"]),l("div",null,[t(e(Y),{class:"q-py-xs q-mb-xs",rounded:"",color:"grey-9",label:e(S)||"never"},null,8,["label"])]),l("div",null,[t(e(O),{name:e(v).CALENDAR_CHECK},null,8,["name"]),l("span",ge,R(e(X)((y=c.beginWorkoutCard)==null?void 0:y.previousCreatedDate)||"-"),1)]),l("div",null,[t(e(O),{name:e(v).TIMER},null,8,["name"]),l("span",Ce,R(x.value||"-"),1)]),t(e(A),{color:"primary",class:"full-width q-mt-md",label:"Begin",onClick:u[1]||(u[1]=D=>_())})]}),_:1})]),_:1}))}}),De=w({__name:"BeginWorkoutsList",setup(c){const{log:a}=N(),o=pe();return L(async()=>{try{await o.updateBeginWorkoutCards(i)}catch(r){a.error("BeginWorkoutsList:onMounted",r)}}),(r,E)=>(W(!0),K(ne,null,re(e(o).beginWorkoutCards,f=>(W(),K("div",{key:f.id,class:"col-sm-6 col-xs-12"},[t(ke,{beginWorkoutCard:f},null,8,["beginWorkoutCard"])]))),128))}}),ve={class:"row q-col-gutter-md justify-start"},We={class:"col-12"},Ee=w({__name:"DashboardPage",setup(c){return(a,o)=>(W(),q(e(z),{padding:""},{default:g(()=>[l("div",ve,[l("div",We,[t(ie)]),t(me),t(De)])]),_:1}))}}),Te=w({__name:"DashboardView",setup(c){return(a,o)=>(W(),q(Ee))}});export{Te as default};
