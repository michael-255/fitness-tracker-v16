import{d as C,x as V,r as I,o as y,n as x,a as o,u as t,af as S,C as M,h as A,i as W,ar as g,m as q,X as Q,D as L,l as F,F as O,c as D,w as d,Q as h,aq as $,f as N,I as _,ag as w,B as z,p as m,t as k,g as b,N as T}from"./index.e2d3c5de.js";import{i as B}from"./validators.06a91c63.js";const G=C({__name:"WeightRepsItem",props:{index:null,weight:null,reps:null},setup(R){const l=R,i=V(),u=I(null),e=I(null),n=I(l.weight),p=I(l.reps),c="Invalid";function f(){i.temporaryItem.weight[l.index]=n.value,i.temporaryItem.reps[l.index]=p.value,E()}function E(){var a,s;i.validateItem.weight=!!((a=u==null?void 0:u.value)!=null&&a.validate()),i.validateItem.reps=!!((s=e==null?void 0:e.value)!=null&&s.validate()),i.validateItem.distance=!0,i.validateItem.duration=!0}return(a,s)=>(y(),x(M,null,[o(t(S),{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value=r),modelModifiers:{number:!0},ref_key:"weightInputRef",ref:u,rules:[r=>t(B)(r)||c],dense:"",outlined:"",type:"number",color:"primary",class:"col",onBlur:s[1]||(s[1]=r=>f())},null,8,["modelValue","rules"]),o(t(S),{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=r=>p.value=r),modelModifiers:{number:!0},ref_key:"repsInputRef",ref:e,rules:[r=>t(B)(r)||c],dense:"",outlined:"",type:"number",color:"primary",class:"col",onBlur:s[3]||(s[3]=r=>f())},null,8,["modelValue","rules"])],64))}}),H=m("div",{class:"text-h6"},"Sets",-1),P=m("div",{class:"text-caption"},"#",-1),U=m("div",{class:"text-caption col"},"Weight",-1),X=m("div",{class:"text-caption col"},"Reps",-1),Y={class:"text-bold q-mt-lg"},j={align:"right"},Z=C({__name:"SetInput",setup(R){const{log:l}=A(),{confirmDialog:i,dismissDialog:u}=W(),e=V(),n=I(g.REMINDER_ONLY),p=20;q(()=>{c()});function c(){try{const a=e.selectedItem.weight,s=e.selectedItem.reps;e.temporaryItem.weight=a&&a.length>0?[...e.selectedItem.weight]:[],e.temporaryItem.reps=s&&s.length>0?[...e.selectedItem.reps]:[],e.validateItem.weight=!0,e.validateItem.reps=!0}catch(a){l.error("SetInput:initializeTemporaryItem",a)}}function f(){n.value===g.WEIGHT_AND_REPS?(e.temporaryItem.weight.push(void 0),e.temporaryItem.reps.push(void 0),e.validateItem.weight=!1,e.validateItem.reps=!1):l.info("Exercise does not support sets")}function E(){n.value===g.WEIGHT_AND_REPS&&e.validateItem.weight&&e.validateItem.reps?i("Remove Set","Are you sure you want to remove the last set?",_.DELETE,T.ERROR,()=>{e.temporaryItem.weight.pop(),e.temporaryItem.reps.pop()}):u("Validation Errors","Cannot remove any sets until validation errors are cleared.",_.WARN,T.WARN)}return Q(()=>{var a;return(a=e==null?void 0:e.temporaryItem)==null?void 0:a.parentId},async a=>{var s;try{if(a){const r=(s=await L.getFirstByField(F.EXERCISES,O.ID,a))==null?void 0:s.exerciseTracks;n.value=r,c()}}catch(r){l.critical("Exercise parent watcher",r)}},{immediate:!0}),(a,s)=>n.value===t(g).WEIGHT_AND_REPS?(y(),D(t(b),{key:0},{default:d(()=>[o(t(h),{class:"row items-start q-py-sm"},{default:d(()=>[H,o(t($)),o(t(N),{disable:t(e).temporaryItem.weight.length>=p,round:"",color:"positive",size:"sm",icon:t(_).ADD,onClick:s[0]||(s[0]=r=>f())},null,8,["disable","icon"])]),_:1}),o(t(w)),o(t(h),{class:"q-gutter-md row items-start q-py-none"},{default:d(()=>[P,o(t(w),{vertical:""}),U,o(t(w),{vertical:""}),X]),_:1}),o(t(w)),o(t(h),null,{default:d(()=>[(y(!0),x(M,null,z(t(e).temporaryItem.reps,(r,v)=>(y(),x("div",{key:v,class:"q-gutter-md row items-start q-mb-sm"},[m("div",Y,k(v+1),1),o(G,{index:v,weight:t(e).temporaryItem.weight[v],reps:t(e).temporaryItem.reps[v]},null,8,["index","weight","reps"])]))),128)),m("div",j,[o(t(N),{disable:!t(e).temporaryItem.reps.length,round:"",color:"negative",size:"sm",icon:t(_).REMOVE,onClick:s[1]||(s[1]=r=>E())},null,8,["disable","icon"])])]),_:1})]),_:1})):(y(),D(t(b),{key:1},{default:d(()=>[o(t(h),{class:"row items-start"},{default:d(()=>[m("div",null,'Exercise tracking is set to "'+k(t(g).REMINDER_ONLY)+'"',1)]),_:1})]),_:1}))}});export{Z as default};
