import{d as D,o as I,c as T,w as y,p as S,t as B,a,u as s,b as ae,I as $,Q as O,r as w,n as C,af as J,C as V,D as m,l as d,F as A,h as b,i as ee,m as te,aq as ne,f as N,ag as W,B as se,N as ie,x as re,ar as oe,g as le,O as ce,j as ue,R as de}from"./index.2a13561f.js";import{Q as ve}from"./QPage.e07c5fda.js";import{i as Z}from"./validators.06a91c63.js";const me={class:"text-h6 q-mb-sm"},pe=D({__name:"ActiveReminderSection",props:{exerciseName:null},setup(n){return(i,c)=>(I(),T(s(O),{class:"q-py-sm"},{default:y(()=>[S("div",me,B(n.exerciseName),1),a(s(ae),{name:s($).ACTIVE_NOTIFY,color:"primary",size:"xl"},null,8,["name"])]),_:1}))}}),Ee=D({__name:"ActiveWeightRepsItems",props:{index:null,weight:null,reps:null,activeExerciseRecordId:null,weightHint:null,repsHint:null},setup(n){const i=n,c=w(null),p=w(null),E=w(i.weight),e=w(i.reps),t="Invalid";async function u(){if(i.activeExerciseRecordId){const _=await m.getFirstByField(d.ACTIVE_EXERCISES,A.ID,i.activeExerciseRecordId),l=(_==null?void 0:_.weight)||[],g=(_==null?void 0:_.reps)||[];l[i.index]=E.value||0,g[i.index]=e.value||0,await m.updateById(d.ACTIVE_EXERCISES,i.activeExerciseRecordId,{weight:[...l],reps:[...g]})}o()}function o(){var _,l;(_=c==null?void 0:c.value)==null||_.validate(),(l=p==null?void 0:p.value)==null||l.validate()}return(_,l)=>(I(),C(V,null,[a(s(J),{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=g=>E.value=g),modelModifiers:{number:!0},ref_key:"weightInputRef",ref:c,rules:[g=>s(Z)(g)||t],dense:"",outlined:"",type:"number",color:"primary",class:"col",hint:n.weightHint,onBlur:l[1]||(l[1]=g=>u())},null,8,["modelValue","rules","hint"]),a(s(J),{modelValue:e.value,"onUpdate:modelValue":l[2]||(l[2]=g=>e.value=g),modelModifiers:{number:!0},ref_key:"repsInputRef",ref:p,rules:[g=>s(Z)(g)||t],dense:"",outlined:"",type:"number",color:"primary",class:"col",hint:n.repsHint,onBlur:l[3]||(l[3]=g=>u())},null,8,["modelValue","rules","hint"])],64))}}),ge=S("div",{class:"text-h6"},"Sets",-1),_e=S("div",{class:"text-caption"},"#",-1),Ie=S("div",{class:"text-caption col"},"Weight",-1),he=S("div",{class:"text-caption col"},"Reps",-1),fe={class:"text-bold q-mt-lg"},Se={align:"right"},Re=D({__name:"ActiveSetInput",props:{activeExerciseRecordId:null,activeExerciseRecordparentId:null},setup(n){const i=n,{log:c}=b(),{confirmDialog:p}=ee(),E=w([]),e=w([]),t=w([]),u=w([]),o=20;te(async()=>{var R,h;try{const v=await m.getFirstByField(d.ACTIVE_EXERCISES,A.ID,i.activeExerciseRecordId);if(E.value=(v==null?void 0:v.weight)||[],e.value=(v==null?void 0:v.reps)||[],i.activeExerciseRecordId){const r=await m.getNewestByField(d.EXERCISE_RECORDS,A.PARENT_ID,i.activeExerciseRecordparentId);t.value=((R=r==null?void 0:r.weight)==null?void 0:R.map(x=>String(x||"-")))||[],u.value=((h=r==null?void 0:r.reps)==null?void 0:h.map(x=>String(x||"-")))||[];const k=await m.getAllByField(d.EXERCISE_RECORDS,A.PARENT_ID,i.activeExerciseRecordparentId);t.value[0]=_(k)}e.value.length===0&&l()}catch(v){c.error("ActiveSetInput:onMounted",v)}});function _(R){var H,X,M,Q,P,L,U,K,j,z,Y,G;const h=(X=(H=R[0])==null?void 0:H.weight)==null?void 0:X[0],v=(Q=(M=R[1])==null?void 0:M.weight)==null?void 0:Q[0],r=(L=(P=R[2])==null?void 0:P.weight)==null?void 0:L[0],k=(K=(U=R[3])==null?void 0:U.weight)==null?void 0:K[0],x=(z=(j=R[4])==null?void 0:j.weight)==null?void 0:z[0],q=(G=(Y=R[5])==null?void 0:Y.weight)==null?void 0:G[0];let F="-",f="";return h&&(F=`${h}`,v&&(f=`${h-v}`,r&&(f=`${f}, ${v-r}`,k&&(f=`${f}, ${r-k}`,x&&(f=`${f}, ${k-x}`,q&&(f=`${f}, ${x-q}`)))))),f!==""?`${F} --- ${f}`:F}function l(){E.value.push(void 0),e.value.push(void 0)}function g(){p("Remove Set","Are you sure you want to remove the last set?",$.DELETE,ie.ERROR,()=>{E.value.pop(),e.value.pop()})}return(R,h)=>(I(),C(V,null,[a(s(O),{class:"row items-start q-py-sm"},{default:y(()=>[ge,a(s(ne)),a(s(N),{disable:e.value.length>=o,round:"",color:"positive",size:"sm",icon:s($).ADD,onClick:h[0]||(h[0]=v=>l())},null,8,["disable","icon"])]),_:1}),a(s(W)),a(s(O),{class:"q-gutter-md row items-start q-py-none"},{default:y(()=>[_e,a(s(W),{vertical:""}),Ie,a(s(W),{vertical:""}),he]),_:1}),a(s(W)),a(s(O),null,{default:y(()=>[(I(!0),C(V,null,se(e.value,(v,r)=>(I(),C("div",{key:r,class:"q-gutter-md row items-start q-mb-sm"},[S("div",fe,B(r+1),1),a(Ee,{index:r,weight:E.value[r],reps:e.value[r],activeExerciseRecordId:n.activeExerciseRecordId,weightHint:t.value[r]||"-",repsHint:u.value[r]||"-"},null,8,["index","weight","reps","activeExerciseRecordId","weightHint","repsHint"])]))),128)),S("div",Se,[a(s(N),{disable:!e.value.length,round:"",color:"negative",size:"sm",icon:s($).REMOVE,onClick:h[1]||(h[1]=v=>g())},null,8,["disable","icon"])])]),_:1})],64))}}),we={key:1},xe={class:"text-h6 q-mb-sm"},ye=D({__name:"ActiveExerciseCard",props:{name:null,tracks:null,id:null,parentId:null},setup(n){const i=n,{log:c}=b(),p=re();async function E(){try{const e=await m.getFirstByField(d.EXERCISES,A.ID,i==null?void 0:i.parentId);p.openDialog(d.EXERCISES,ce.REPORT,e)}catch(e){c.error("ActiveExerciseCard:onReportDialog",e)}}return(e,t)=>(I(),T(s(le),{class:"q-mb-md"},{default:y(()=>[n.tracks===s(oe).REMINDER_ONLY?(I(),T(pe,{key:0,exerciseName:n.name},null,8,["exerciseName"])):(I(),C("div",we,[a(s(O),{class:"q-py-sm"},{default:y(()=>[S("div",xe,B(n.name),1),a(s(N),{round:"",flat:"",icon:s($).REPORT,class:"absolute-top-right q-ma-sm",onClick:t[0]||(t[0]=u=>E())},null,8,["icon"])]),_:1}),a(Re,{activeExerciseRecordId:n.id,activeExerciseRecordparentId:n.parentId},null,8,["activeExerciseRecordId","activeExerciseRecordparentId"])]))]),_:1}))}}),Ce=D({__name:"ActiveExercisesList",setup(n){const{log:i}=b(),c=w([]),p=w([]);te(async()=>{try{const t=(await m.getAll(d.ACTIVE_WORKOUTS))[0];c.value=await Promise.all(t==null?void 0:t.exerciseRecordIds.map(async o=>await m.getFirstByField(d.ACTIVE_EXERCISES,A.ID,o)));const u=await Promise.all(c.value.map(async o=>await m.getFirstByField(d.EXERCISES,A.ID,o.parentId)));p.value=u}catch(t){i.error("ActiveExercisesList:onMounted",t)}});function E(t){var u;return(u=p.value.find(o=>o.id===t))==null?void 0:u.name}function e(t){var u;return(u=p.value.find(o=>o.id===t))==null?void 0:u.exerciseTracks}return(t,u)=>(I(!0),C(V,null,se(c.value,o=>(I(),C("div",{key:o.id,class:"col-sm-6 col-xs-12"},[a(ye,{name:E(o.parentId),tracks:e(o.parentId),id:o.id,parentId:o.parentId},null,8,["name","tracks","id","parentId"])]))),128))}}),Ae={class:"row justify-center"},De={class:"col-12"},$e={class:"row justify-center q-mt-lg"},ke=D({__name:"ActiveWorkoutPage",setup(n){const{log:i}=b(),{confirmDialog:c}=ee(),p=ue();async function E(){c("Finish Current Workout","You you ready to finish and save this workout?",$.SAVE,ie.INFO,async()=>{try{const e=(await m.getAll(d.ACTIVE_WORKOUTS))[0],t=await m.getAll(d.ACTIVE_EXERCISES);e.finishedDate=new Date().toISOString(),await m.bulkAdd(d.EXERCISE_RECORDS,t),await m.add(d.WORKOUT_RECORDS,e),await m.clear(d.ACTIVE_EXERCISES),await m.clear(d.ACTIVE_WORKOUTS),p.push({name:de.DASHBOARD})}catch(e){i.error("ActiveWorkoutPage:finishWorkout",e)}})}return(e,t)=>(I(),T(s(ve),{padding:""},{default:y(()=>[S("div",Ae,[S("div",De,[a(Ce)])]),S("div",$e,[a(N,{label:"Finish Workout",color:"positive",onClick:t[0]||(t[0]=u=>E())})])]),_:1}))}}),Ve=D({__name:"ActiveWorkoutView",setup(n){return(i,c)=>(I(),T(ke))}});export{Ve as default};
