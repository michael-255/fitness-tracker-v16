import{Q as z}from"./QPage.d082c0c0.js";import{d as R,o as W,c as B,w as p,a as t,u as e,Q as T,b as h,I as D,e as F,t as f,A as G,f as O,R as I,g as V,h as N,i as M,j as P,r as x,k as Q,D as i,l as o,m as L,F as b,n as K,p as l,q as X,s as J,N as j,v as Z,x as ee,y as te,O as ae,E as oe,z as $,W as se,B as re,C as ne}from"./index.04684acb.js";import{u as H,Q as Y}from"./index.be9ccf71.js";import"./index.3937e18b.js";const ie=R({__name:"MessageCard",setup(d){return(s,a)=>(W(),B(e(V),null,{default:p(()=>[t(e(T),{class:"bg-primary text-white q-py-sm text-h5"},{default:p(()=>[t(h,{class:"q-pb-xs q-pr-sm",name:e(D).DASHBOARD},null,8,["name"]),F(" Dashboard ")]),_:1}),t(e(T),null,{default:p(()=>[F(f(e(G).APP_NAME)+` allows you to track available workouts from the list below. Make sure you create some or load the default workouts if you don't see any. You can also track body measurements by clicking the "Take Measurements" button. `,1)]),_:1}),t(e(T),null,{default:p(()=>[t(O,{color:"positive",to:{name:e(I).TAKE_MEASUREMENTS},icon:e(D).MEASUREMENTS,label:"Take Measurements"},null,8,["to","icon"])]),_:1})]),_:1}))}}),le={key:0,class:"col-sm-6 col-xs-12"},ce={class:"text-h6 q-mb-sm"},ue={class:"text-caption q-ml-xs"},de=l("span",{class:"text-caption q-ml-xs"},"In progress workout",-1),me=R({__name:"ResumeWorkoutCard",setup(d){const{log:s}=N(),{confirmDialog:a}=M(),r=P(),v=x(new Date("")),E=H(v),_=x(null),A=x("");Q(async()=>{const c=(await i.getAll(o.ACTIVE_WORKOUTS))[0];v.value=new Date((c==null?void 0:c.createdDate)||"")}),L(async()=>{var m;_.value=(await i.getAll(o.ACTIVE_WORKOUTS))[0];const c=await i.getFirstByField(o.WORKOUTS,b.ID,(m=_.value)==null?void 0:m.parentId);A.value=c==null?void 0:c.name});async function q(){a("Delete Active Workout","Do you want to delete the currently active workout?",D.DELETE,j.ERROR,async()=>{try{await i.clear(o.ACTIVE_WORKOUTS),await i.clear(o.ACTIVE_EXERCISES),_.value=null}catch(c){s.error("ResumeWorkoutCarde:deleteActiveWorkout",c)}})}function U(){r.push({name:I.ACTIVE_WORKOUT})}return(c,m)=>_.value?(W(),K("div",le,[t(e(V),null,{default:p(()=>[t(e(T),{class:"q-pt-sm"},{default:p(()=>{var y;return[l("div",ce,f(A.value),1),t(e(O),{round:"",flat:"",icon:"delete_forever",color:"negative",class:"absolute-top-right q-ma-sm",onClick:m[0]||(m[0]=S=>q())}),l("div",null,[t(e(Y),{class:"q-py-xs q-mb-xs",rounded:"",color:"grey-9",label:e(E)||"never"},null,8,["label"])]),l("div",null,[t(e(h),{name:"start"}),l("span",ue,f(e(X)((y=_.value)==null?void 0:y.createdDate)||"-"),1)]),l("div",null,[t(e(h),{name:"directions_run"}),de]),t(e(O),{color:"positive",class:"full-width q-mt-md",label:"Resume",onClick:m[1]||(m[1]=S=>U())})]}),_:1})]),_:1})])):J("",!0)}}),pe=Z({id:"begin-workouts",state:()=>({beginWorkoutCards:[]}),actions:{async updateBeginWorkoutCards(d){const s=(await d.getAll(o.WORKOUTS)).sort((a,r)=>a.name.localeCompare(r.name));this.beginWorkoutCards=await Promise.all(s.map(async a=>{const r=await d.getNewestByField(o.WORKOUT_RECORDS,b.PARENT_ID,a.id);return{id:a.id,name:a.name,previousCreatedDate:r==null?void 0:r.createdDate,previousFinishedDate:r==null?void 0:r.finishedDate}}))}}}),_e={class:"text-h6 q-mb-sm"},ge={class:"text-caption q-ml-xs"},Ce={class:"text-caption q-ml-xs"},ke=R({__name:"BeginWorkoutCard",props:{beginWorkoutCard:null},setup(d){var S;const s=d,{log:a}=N(),{confirmDialog:r}=M(),v=P(),E=ee(),_=x(new Date(((S=s.beginWorkoutCard)==null?void 0:S.previousCreatedDate)||"")),A=H(_),q=c();Q(()=>{var n;_.value=new Date(((n=s.beginWorkoutCard)==null?void 0:n.previousCreatedDate)||"")});async function U(){var n;try{const u=await i.getFirstByField(o.WORKOUTS,b.ID,(n=s.beginWorkoutCard)==null?void 0:n.id);E.openDialog(o.WORKOUTS,ae.REPORT,u)}catch(u){a.error("BeginWorkoutCard:onReportDialog",u)}}function c(){var k,g;const n=new Date(((k=s.beginWorkoutCard)==null?void 0:k.previousCreatedDate)||"").getTime(),C=new Date(((g=s.beginWorkoutCard)==null?void 0:g.previousFinishedDate)||"").getTime()-n;return te(C)}async function m(){const n=await i.getAll(o.ACTIVE_WORKOUTS);n&&n[0]?r("Replace Current Workout","You have a workout that is currently in progress. Do you want to replace it?",D.RENEW,j.WARN,async()=>{try{y(),v.push({name:I.ACTIVE_WORKOUT})}catch(u){a.error("BeginWorkoutCard:beginWorkout",u)}}):(y(),v.push({name:I.ACTIVE_WORKOUT}))}async function y(){var k;await i.clear(o.ACTIVE_WORKOUTS),await i.clear(o.ACTIVE_EXERCISES);const n=await i.getFirstByField(o.WORKOUTS,b.ID,(k=s.beginWorkoutCard)==null?void 0:k.id),C=(await Promise.all(n.exerciseIds.map(async g=>await i.getFirstByField(o.EXERCISES,b.ID,g)))).map(g=>new oe({id:$(),createdDate:new Date().toISOString(),parentId:g.id,weight:[],reps:[]})),w=new se({id:$(),createdDate:new Date().toISOString(),parentId:n.id,finishedDate:"",exerciseRecordIds:C.map(g=>g.id)});await i.add(o.ACTIVE_WORKOUTS,w),await i.bulkAdd(o.ACTIVE_EXERCISES,C)}return(n,u)=>(W(),B(e(V),null,{default:p(()=>[t(e(T),{class:"q-pt-sm"},{default:p(()=>{var C,w;return[l("div",_e,f((C=d.beginWorkoutCard)==null?void 0:C.name),1),t(e(O),{round:"",flat:"",icon:e(D).REPORT,class:"absolute-top-right q-ma-sm",onClick:u[0]||(u[0]=k=>U())},null,8,["icon"]),l("div",null,[t(e(Y),{class:"q-py-xs q-mb-xs",rounded:"",color:"grey-9",label:e(A)||"never"},null,8,["label"])]),l("div",null,[t(e(h),{name:e(D).CALENDAR_CHECK},null,8,["name"]),l("span",ge,f(e(X)((w=d.beginWorkoutCard)==null?void 0:w.previousCreatedDate)||"-"),1)]),l("div",null,[t(e(h),{name:e(D).TIMER},null,8,["name"]),l("span",Ce,f(e(q)||"-"),1)]),t(e(O),{color:"primary",class:"full-width q-mt-md",label:"Begin",onClick:u[1]||(u[1]=k=>m())})]}),_:1})]),_:1}))}}),De=R({__name:"BeginWorkoutsList",setup(d){const{log:s}=N(),a=pe();return L(async()=>{try{await a.updateBeginWorkoutCards(i)}catch(r){s.error("BeginWorkoutsList:onMounted",r)}}),(r,v)=>(W(!0),K(ne,null,re(e(a).beginWorkoutCards,E=>(W(),K("div",{key:E.id,class:"col-sm-6 col-xs-12"},[t(ke,{beginWorkoutCard:E},null,8,["beginWorkoutCard"])]))),128))}}),We={class:"row q-col-gutter-md justify-start"},ve={class:"col-12"},Ee=R({__name:"DashboardPage",setup(d){return(s,a)=>(W(),B(e(z),{padding:""},{default:p(()=>[l("div",We,[l("div",ve,[t(ie)]),t(me),t(De)])]),_:1}))}}),Te=R({__name:"DashboardView",setup(d){return(s,a)=>(W(),B(Ee))}});export{Te as default};
